# 1주차

## 보안이 필요한 이유

- 사용자가 애플리케이션을 안심하고 사용할 수 있도록 보안을 보장해줘야합니다.

## http

브라우저는 HTTP 통신 프로토콜에 따라 서버와 통신하여 리소스 및 데이터를 CRUD합니다.

![](https://velog.velcdn.com/images/pangkyu/post/12871e39-eb07-4a6a-bfd9-a3c06a19d607/image.png)

클라이언트에서 URL과 DNS 방식으로 서버 통신을 합니다.

**URL (Uniform Resource Locator)**
리소스가 위치하는 장소를 나타내는 문자열입니다.
`https://example.com?search=abc`

**DNS (Domain Name System)**
도메인 주소를 IP주소로 변환해줍니다.
구글에 접속할 때, 구글의 서버IP를 입력하는 것이 아닌 도메인을 입력합니다.

사용자가 브라우저에 google.com을 입력한다고하면 컴퓨터가 로컬 DNS 캐시를 확인하여 없는 경우 DNS 서버(ex:8.8.8.8)에 질의하여 계층적으로 검색하여 최종 IP를 반환합니다.
이후 브라우저는 해당 서버에 http 요청을 보냅니다.

DNS를 사용하지 않고 구글 IP 주소 중 하나인 `142.250.206.68`을 주소창에 입력해도 구글로 접속됩니다.

![](https://velog.velcdn.com/images/pangkyu/post/52bf96cb-9dd7-4304-9e52-d47dc1f8b182/image.png)

**TCP/IP**
데이터를 주고받는 과정은 통신 프로토콜로 규칙이 정해져있습니다. TCP와 IP를 포함하는 통신 프로토콜을 TCP/IP라고 하며 4계층으로 구성됩니다.

TCP/IP 4계층 -> OSI 7계층을 간소화한 모델입니다. (여러 OSI 계층이 TCP/IP 계층 하나로 묶임)

![](https://velog.velcdn.com/images/pangkyu/post/98c591e9-24f6-425c-a822-e2d0a249a12c/image.png)

![](https://velog.velcdn.com/images/pangkyu/post/9e549240-d06e-4452-966f-c6bea0a00e02/image.png)

응용 계층 : http / SMTP 요청
전송 계층 : TCP 연결 설정 / 포트 80사용
인터넷 계층 : IP 주소로 패킷 전달
네트워크 접속 계층 : 이더넷 프레임으로 전송

**TCP** : 패킷 데이터의 전달을 보증하며 보낸 순서대로 받습니다.
**IP** : 데이터 조각을 최대한 빠르게 목적지로 보내기 때문에 누락될 가능성과 순서가 보장되지않습니다.

속도 : TCP < IP (더 빠름)
안정성 : IP < TCP (3way 핸드쉐이킹으로 패킷이 잘 보내지는지 여부를 체크합니다)

<3way 핸드쉐이킹>
![](https://velog.velcdn.com/images/pangkyu/post/25219da1-1315-453e-850e-29766cf065c2/image.png)

![](https://velog.velcdn.com/images/pangkyu/post/4f5170b5-a648-42d4-82f5-22d9cd7aa2e2/image.png)

**http method**
http에는 리소스를 요청하는 여러 메소드들이 있는데, GET/HEAD/OPTIONS/TRACE는 서버에서 리소스를 변경하는 부작용이 없습니다. (멱등성 O)

단, TRACE는 XST(크로스 사이트 트레이싱)을 통한 정보 유출의 위험이 있어 현재는 거의 모든 브라우저에서 지원하지 않습니다.

그에 반하여 POST/PUT/DELETE는 부작용의 가능성이 있으며, 잘못 이용할 경우 서버 상태와 리소스에 영향을 미칩니다.

CONNECT는 통신을 중계하는 프록시 서버가 통신 데이터를 볼 수 없을 때 데이터를 전달하는 메소드인데, 수신자를 제한하지 않으면 공격자가 이를 악용할 수 있습니다.

HTTP는 원래 문서 전송을 위한 프로토콜이기 때문에, 서버 간의 상태를 관리할 필요가 없었지만 웹이 고도화됨에 따라 필요성이 생겨 서버와 통신한 정보를 브라우저 안의 **쿠키**에 보관하는 방식이 생겼습니다.

쿠키에 로그인 정보를 보관하는 것으로 재접속하는 경우에도 사용자가 로그인이 된 상태를 유지할 수 있도록 합니다.

**HTTP의 약점**
문서를 전송하기 위한 통신 프로토콜이기 때문에 보안은 고려되지 않습니다.
보안이 되어있지 않다는 것은 통신을 주고받을 때 민감한 정보도 공격자가 해당 정보를 얻을 수 있다는 것을 의미합니다.

통신 과정 중 감청이나 데이터 결함을 막기 위해서는 https통신을 사용해야합니다.

https 통신 중 TLS 핸드셰이크라는 암호 통신 과정을 진행하여 데이터 암호화를 만듭니다. (일회용 비밀키를 통해 암호화시켜서 유출되도 문제없음)

**Mixed Content**
https를 사용하는 환경에서 http 통신을 하는 경우 발생하는 문제입니다.
Passive mixed content : 이미지와 영상, 음성 파일과 같은 리소스가 해당 문제를 발생시킵니다.

Active mixed content : 자바스크립트와 CSS 등 브라우저에서 실행되는 코드에 대한 패턴입니다.

기본적으로 브라우저에서는 Active mixed contnet를 차단하여 악성 스크립트가 실행될 가능성과 민감한 정보를 유출시키지 않도록 사전에 막고있습니다.

http로 접속하는 경우를 막기 위해 HSTS(HTTP Stict Transport Security)를 통해 https 접속을 강제하는 경우도 있습니다.

- 사용자가 한번 https로 접속하면 서버가 응답헤더에 hsts정책을 포함합니다.
  `Strict-Transport-Security: max-age=31536000; includeSubDomains; preload
`
  이를 통해 1년동안 https로만 접속할 수 있도록 강제합니다.
  해당 기능을 설정하면 http 접속이 불가능하기 때문에 https가 제대로 작동하는 지 검증이 필요합니다.
